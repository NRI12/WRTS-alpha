{% extends "base/base.html" %}

{% block title %}AI-WRTS - Hệ thống luyện tập võ thuật thông minh{% endblock %}

{% block content %}
<section class="hero-section py-5" style="background: radial-gradient(1200px 600px at 10% 10%, #1f2a44 0%, #0f172a 40%, #0b1020 100%); color: #fff;">
    <div class="container py-5">
        <div class="row align-items-center g-4">
            <div class="col-lg-7">
                <h1 class="display-5 fw-bold mb-3" style="line-height: 1.2;">
                    Nâng tầm luyện tập võ thuật với AI
                </h1>
                <p class="lead text-light-50 mb-4" style="color: rgba(255,255,255,.7);">
                    Phân tích động tác theo thời gian thực, chấm điểm tự động và theo dõi tiến độ. Kết nối giảng viên và học viên trong một nền tảng thống nhất.
                </p>
                <div class="d-flex gap-3 flex-wrap">
                    {% if is_logged_in and role_dashboard %}
                        <a href="{{ role_dashboard }}" class="btn btn-primary btn-lg px-4">
                            Tiếp tục với bảng điều khiển
                        </a>
                        <a href="{{ url_for('auth.profile') }}" class="btn btn-outline-light btn-lg px-4">
                            Xem hồ sơ của bạn
                        </a>
                    {% else %}
                        <a href="{{ url_for('auth.login') }}" class="btn btn-primary btn-lg px-4">
                            Bắt đầu ngay
                        </a>
                        <a href="{{ url_for('auth.register') }}" class="btn btn-outline-light btn-lg px-4">
                            Đăng ký tài khoản
                        </a>
                    {% endif %}
                </div>
            </div>
            <div class="col-lg-5">
                <div class="ratio ratio-16x9 rounded-4 overflow-hidden shadow-lg" style="background: rgba(255,255,255,.06); border: 1px solid rgba(255,255,255,.08);">
                    <div class="d-flex align-items-center justify-content-center h-100 w-100">
                        <div class="text-center p-4">
                            <i class="fas fa-dragon fa-3x mb-3" style="color:#60a5fa"></i>
                            <p class="mb-0" style="color: rgba(255,255,255,.7);">AI-WRTS Demo Preview</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Decorative gradient orbs -->
        <span class="orb orb-1"></span>
        <span class="orb orb-2"></span>
        <span class="orb orb-3"></span>
    </div>
</section>

<section class="features-section py-5">
    <div class="container py-4">
        <div class="text-center mb-5">
            <h2 class="fw-bold">Tính năng nổi bật</h2>
            <p class="text-muted mb-0">Thiết kế cho giảng viên và học viên hiện đại</p>
        </div>
        <div class="row g-4">
            <div class="col-md-4">
                <div class="h-100 p-4 rounded-4 border bg-white shadow-sm">
                    <div class="mb-3"><i class="fas fa-brain text-primary"></i></div>
                    <h5 class="mb-2">Phân tích bằng AI</h5>
                    <p class="text-muted mb-0">Đánh giá kỹ thuật, tư thế và nhịp điệu tự động, đưa ra gợi ý cải thiện.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="h-100 p-4 rounded-4 border bg-white shadow-sm">
                    <div class="mb-3"><i class="fas fa-user-tie text-success"></i></div>
                    <h5 class="mb-2">Quản lý lớp học</h5>
                    <p class="text-muted mb-0">Tổ chức lớp, giao bài, chấm điểm và phản hồi tập trung, trực quan.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="h-100 p-4 rounded-4 border bg-white shadow-sm">
                    <div class="mb-3"><i class="fas fa-chart-line text-warning"></i></div>
                    <h5 class="mb-2">Theo dõi tiến độ</h5>
                    <p class="text-muted mb-0">Biểu đồ và thống kê giúp theo dõi sự tiến bộ của học viên theo thời gian.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Stats Section (real data) -->
<section class="stats-section py-5">
    <div class="container py-3">
        <div class="row g-4 text-center">
            <div class="col-6 col-md-3">
                <div class="stat-card p-3 rounded-4 border bg-white shadow-sm h-100">
                    <div class="stat-value display-6 fw-bold">
                        {{ system_overview.total_students if system_overview else '—' }}
                    </div>
                    <div class="text-muted">Học viên đang hoạt động</div>
                </div>
            </div>
            <div class="col-6 col-md-3">
                <div class="stat-card p-3 rounded-4 border bg-white shadow-sm h-100">
                    <div class="stat-value display-6 fw-bold">
                        {{ system_overview.total_instructors if system_overview else '—' }}
                    </div>
                    <div class="text-muted">Giảng viên đang hoạt động</div>
                </div>
            </div>
            <div class="col-6 col-md-3">
                <div class="stat-card p-3 rounded-4 border bg-white shadow-sm h-100">
                    <div class="stat-value display-6 fw-bold">
                        {{ system_overview.total_classes if system_overview else '—' }}
                    </div>
                    <div class="text-muted">Lớp học đang mở</div>
                </div>
            </div>
            <div class="col-6 col-md-3">
                <div class="stat-card p-3 rounded-4 border bg-white shadow-sm h-100">
                    <div class="stat-value display-6 fw-bold">
                        {{ system_overview.total_videos if system_overview else '—' }}
                    </div>
                    <div class="text-muted">Video luyện tập đã ghi nhận</div>
                    {% if system_overview %}
                        <div class="small text-muted mt-1">
                            Tỷ lệ đạt: {{ system_overview.system_pass_rate }}%
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    </div>
</section>

<!-- Context banner: hệ thống đang phục vụ ai -->
<section class="info-banner py-4" style="background: linear-gradient(90deg, #0f172a, #111827); color: #e5e7eb;">
    <div class="container py-2">
        <div class="row align-items-center g-3">
            <div class="col-lg-7">
                <h3 class="h5 fw-bold mb-2">
                    {% if system_overview %}
                        AI-WRTS đang đồng hành cùng {{ system_overview.total_students }} học viên
                        và {{ system_overview.total_instructors }} giảng viên trên toàn hệ thống.
                    {% else %}
                        AI-WRTS sẵn sàng đồng hành cùng học viên và giảng viên trong mọi buổi luyện tập.
                    {% endif %}
                </h3>
                <p class="mb-0 small text-muted" style="color: rgba(229,231,235,.85) !important;">
                    Mỗi video luyện tập đều được lưu lại, chấm điểm và phân tích để làm bằng chứng tiến bộ lâu dài.
                </p>
            </div>
            <div class="col-lg-5">
                <ul class="list-unstyled mb-0 small">
                    <li class="mb-1">
                        <i class="fas fa-check-circle text-success me-2"></i>
                        Học viên quay và gửi video luyện tập trực tiếp trên hệ thống.
                    </li>
                    <li class="mb-1">
                        <i class="fas fa-check-circle text-success me-2"></i>
                        AI và giảng viên cùng chấm điểm, đưa ra nhận xét chi tiết.
                    </li>
                    <li class="mb-1">
                        <i class="fas fa-check-circle text-success me-2"></i>
                        Lịch sử điểm số, video và phản hồi được lưu để so sánh theo thời gian.
                    </li>
                </ul>
            </div>
        </div>
    </div>
</section>

<section class="roles-section py-5 bg-light">
    <div class="container py-4">
        <div class="text-center mb-5">
            <h2 class="fw-bold">Dành cho mọi vai trò</h2>
            <p class="text-muted mb-0">Chọn lối vào phù hợp với bạn</p>
        </div>
        <div class="row g-4">
            <div class="col-md-4">
                <div class="h-100 p-4 rounded-4 border bg-white shadow-sm">
                    <div class="d-flex align-items-center mb-2">
                        <i class="fas fa-user-graduate text-primary me-2"></i>
                        <h5 class="mb-0">Học viên</h5>
                    </div>
                    <p class="text-muted">Nộp bài, nhận phản hồi, và theo dõi tiến độ luyện tập.</p>
                    <a href="{{ url_for('auth.login') }}" class="btn btn-outline-primary">Vào bảng điều khiển</a>
                </div>
            </div>
            <div class="col-md-4">
                <div class="h-100 p-4 rounded-4 border bg-white shadow-sm">
                    <div class="d-flex align-items-center mb-2">
                        <i class="fas fa-chalkboard-teacher text-success me-2"></i>
                        <h5 class="mb-0">Giảng viên</h5>
                    </div>
                    <p class="text-muted">Giao bài, chấm điểm, và quản lý lớp học hiệu quả.</p>
                    <a href="{{ url_for('auth.login') }}" class="btn btn-outline-success">Vào bảng điều khiển</a>
                </div>
            </div>
            <div class="col-md-4">
                <div class="h-100 p-4 rounded-4 border bg-white shadow-sm">
                    <div class="d-flex align-items-center mb-2">
                        <i class="fas fa-user-shield text-warning me-2"></i>
                        <h5 class="mb-0">Quản trị</h5>
                    </div>
                    <p class="text-muted">Quản lý người dùng, lớp học, và hoạt động hệ thống.</p>
                    <a href="{{ url_for('auth.login') }}" class="btn btn-outline-warning">Vào bảng điều khiển</a>
                </div>
            </div>
        </div>
    </div>
    
</section>

<!-- Recent feedback (real data, ẩn nội dung nhạy cảm) -->
{% if recent_feedback %}
<section class="testimonials-section py-5 bg-light">
    <div class="container py-4">
        <div class="text-center mb-4">
            <h2 class="fw-bold">Phản hồi gần đây từ người dùng</h2>
            <p class="text-muted mb-0">Một vài chủ đề góp ý mới nhất trong hệ thống</p>
        </div>
        <div class="row g-3">
            {% for fb in recent_feedback %}
            <div class="col-md-4">
                <div class="h-100 p-3 rounded-4 border bg-white shadow-sm">
                    <div class="d-flex justify-content-between align-items-center mb-1">
                        <span class="badge bg-primary text-uppercase small">{{ fb.feedback_type }}</span>
                        <span class="badge bg-light text-muted text-capitalize">
                            {{ fb.feedback_status }}
                        </span>
                    </div>
                    <h6 class="fw-semibold mb-1">{{ fb.subject }}</h6>
                    <p class="mb-0 text-muted small">
                        Gửi ngày {{ fb.created_at.strftime('%d/%m/%Y') }}
                    </p>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- FAQ Section -->
<section class="faq-section py-5">
    <div class="container py-4">
        <div class="text-center mb-5">
            <h2 class="fw-bold">Câu hỏi thường gặp</h2>
            <p class="text-muted mb-0">Giải đáp nhanh thắc mắc của bạn</p>
        </div>
        <div class="accordion" id="faqAccordion">
            <div class="accordion-item rounded-4 overflow-hidden mb-3 border">
                <h2 class="accordion-header" id="faq1">
                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1">
                        AI chấm điểm như thế nào?
                    </button>
                </h2>
                <div id="collapse1" class="accordion-collapse collapse show" data-bs-parent="#faqAccordion">
                    <div class="accordion-body">
                        Hệ thống sử dụng mô hình học sâu phân tích khung hình, tư thế và nhịp điệu để đưa ra điểm số và gợi ý cải thiện.
                    </div>
                </div>
            </div>
            <div class="accordion-item rounded-4 overflow-hidden mb-3 border">
                <h2 class="accordion-header" id="faq2">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2">
                        Tôi có thể dùng trên di động không?
                    </button>
                </h2>
                <div id="collapse2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                    <div class="accordion-body">
                        Có. Giao diện responsive hoạt động tốt trên điện thoại, máy tính bảng và máy tính.
                    </div>
                </div>
            </div>
            <div class="accordion-item rounded-4 overflow-hidden mb-3 border">
                <h2 class="accordion-header" id="faq3">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse3">
                        Dữ liệu của tôi có an toàn không?
                    </button>
                </h2>
                <div id="collapse3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                    <div class="accordion-body">
                        Chúng tôi áp dụng các biện pháp bảo mật chuẩn ngành để bảo vệ tài khoản và video của bạn.
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="cta-section py-5" style="background: #0f172a; color: #fff;">
    <div class="container py-4">
        <div class="row align-items-center">
            <div class="col-lg-8">
                <h3 class="fw-bold mb-2">Sẵn sàng bắt đầu?</h3>
                <p class="mb-0" style="color: rgba(255,255,255,.7);">Đăng nhập để vào bảng điều khiển của bạn, hoặc đăng ký để khám phá AI-WRTS.</p>
            </div>
            <div class="col-lg-4 text-lg-end mt-3 mt-lg-0">
                <a class="btn btn-primary me-2" href="{{ url_for('auth.login') }}">Đăng nhập</a>
                <a class="btn btn-outline-light" href="{{ url_for('auth.register') }}">Đăng ký</a>
            </div>
        </div>
    </div>
    
</section>
{% endblock %}

{% block extra_css %}
<style>
    .hero-section .btn-primary { background: linear-gradient(135deg, #2563eb, #7c3aed); border: none; }
    .hero-section .btn-primary:hover { filter: brightness(1.05); }
    .hero-section .btn-outline-light { border-color: rgba(255,255,255,.6); color: #fff; }
    .hero-section .btn-outline-light:hover { background: rgba(255,255,255,.1); }
    .roles-section .btn { border-radius: 999px; }
    .features-section .border, .roles-section .border, .testimonials-section .border { border-color: #e5e7eb !important; }
    /* Hero decorative orbs */
    .hero-section { position: relative; overflow: hidden; }
    .orb { position: absolute; filter: blur(50px); opacity: .35; pointer-events: none; animation: float 12s ease-in-out infinite; }
    .orb-1 { width: 240px; height: 240px; background: #7c3aed; top: -40px; right: 10%; animation-delay: 0s; }
    .orb-2 { width: 320px; height: 320px; background: #2563eb; bottom: -80px; left: -40px; animation-delay: 1.5s; }
    .orb-3 { width: 160px; height: 160px; background: #22c55e; bottom: 10%; right: 5%; animation-delay: 3s; }
    @keyframes float {
        0% { transform: translateY(0) translateX(0); }
        50% { transform: translateY(-12px) translateX(6px); }
        100% { transform: translateY(0) translateX(0); }
    }
    /* Simple hover lift */
    .stat-card:hover, .features-section .shadow-sm:hover, .roles-section .shadow-sm:hover, .testimonials-section .shadow-sm:hover { transform: translateY(-4px); transition: transform .25s ease; }
</style>
{% endblock %}

